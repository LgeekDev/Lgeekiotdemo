

# lgeekiotsdk使用说明    https://github.com/LgeekDev/Lgeekiotdemo.git

## 安装  LgeekBaseIot19_07_170.apk.apk   

          1：通过 adb或者demo里面button    打开活动  startActivity(getApplication(),null,"com.lgeek.iot.service","com.lgeek.iot.service.setting.SettingActivity",null);
          2：通过   激活码  激活该app  （激活码和逻辑科技要）


## 集成说明（参考该demo）

  1：在工程根目录 build.gradle 文件 添加 仓库  
​    
​               maven{
​                   url "http://116.62.132.24:8081/nexus/content/repositories/lgmaven/"
​               }

  2：在module 的 build.gradle 添加依赖  

```groovy
 implementation  'com.google.code.gson:gson:2.8.5'   
 implementation 'com.lgeek:iot.parse:19.07.170'     版本号可能在变，可及时与逻辑联系
```

  






  3: 在自定义的 MyApp  里面 添加如下代码

```java
 /**
   * 参数1 ： 是否开启日志   参数2  是否输出日志到文件， 需要 文件读取权限  ， 参数3  日志保存天数
   */
   LgeekIotUtils.initLog(true, true, 3);
 /**
  * @param application
  * @param deviceType 固定值
  * @param deviceTypeId 设备类型，4001为第三方机顶盒
  * @param deviceTypeName 设备名称 逻辑iot的时候需要用到该字段，可填写App或厂商的名字
  */
 LgeekSdkMgr.getInstance().init(this, "2", "4001", "机第三方机顶盒");
 // 开启服务
 getApplicationContext().startService(new Intent(this,IotService.class));
```

  4：  编写内部类 （参考IotService.class）

```java
     private class MsgHandler extends AbServiceCallBack {
            public MsgHandler() {
                super();
            }
    
            @Override
            public void onReply(int msgType, String msgId, String msg, int ack) {
                super.onReply(msgType, msgId, msg, ack);
            }
        }     
```

5: 添加和移除回调（参考IotService.class，不要重复添加，并且不用的时候及时移除，比如activity关闭时候及时移除回调，否则影响性能）

```java
 
 @Override
        public void onCreate() {
      
              LgeekSdkMgr.getInstance().addListener(mMsgHandler);
            super.onCreate();
      }
  
      @Override
      public void onDestroy() {
          super.onDestroy();
          LgeekSdkMgr.getInstance().removeListener(mMsgHandler);
      }
```
  6：方法说明（参考IotService.class 里面注释）

```java
      private class MsgHandler extends AbServiceCallBack {
             public MsgHandler() {
                 super();
             }
     
             //收到消息回复      默认有回复   如果有特殊需求可以  去掉super   自定义回复
             @Override
             public void onReply(int msgType, String msgId, String msg, int ack) {
                 super.onReply(msgType, msgId, msg, ack);
     
     //            String s="自定义回复";
     //            LgeekSdkMgr.getInstance().publish(s);
     
             }
     
             //服务端主动要求设备端上报设备状态   设备 状态 全量上报  当前设备状态上报   目前支持 电视
     
             @Override
             public void devConfigPortAll() {
                 super.devConfigPortAll();
             }
     
             @Override
             public void devConfigPort() {
                 super.devConfigPort();
             }
     
             @Override
             public void getDevConfig() {
                 super.getDevConfig();
             }
     
             //点播
             @Override
             public void onBunchExecute(String json) {
                 super.onBunchExecute(json);
                 //内容格式在下方表哥
             }
     
             //点播  我要看 战狼2   返回 contentId
             @Override
             public void onBunchPlayContentId(String contentId) {
                 super.onBunchPlayContentId(contentId);
             }
     
             //点播 （我要看 刘德华电影）
             @Override
             public void onBunchShows(String item) {
                 super.onBunchShows(item);
             }
          
            //选择第几个
          	@Override
            public void onChoose(int value) {
                super.onChoose(value);
            }
     
            //返回上一页
            @Override
            public void onBack542(JSONObject jsondata) {
                super.onBack542(jsondata);
            }
         
           	//返回上一页
            @Override
            public void onBack541(JSONObject jsondata) {
                super.onBack541(jsondata);
            }

```



<center>资源检索命名空间表</center>



| 属性       | 取值                                                         | 说明                     | 是否必须 |
| ---------- | ------------------------------------------------------------ | ------------------------ | -------- |
| category   | 1.movie 2.tvSeries 3.variety 4.animation 5.documentary （1. 电影 2. 电视剧 3. 综艺 4. 动画 5.纪录片） | 视频分类                 | 是       |
| type       | 1.comedy 2.thriller 3.martialArts 4.action 5.scienceFiction （1.喜剧 2.惊悚 3.武侠 4.动作 5.科幻） | 视频类型                 | 是       |
| directors  |                                                              | 导演                     | 否       |
| performers |                                                              | 演员                     | 否       |
| season     | 数值                                                         | 第几季                   | 否       |
| episode    | 数值                                                         | 第几集                   | 否       |
| date       |                                                              | 视频年代（格林尼治时间） | 否       |
| country    | 国家取值是否需要转义（待定）                                 | 国家                     | 否       |
| language   | 语言是否需要转义（待定）                                     | 语言                     | 否       |
| sortBy     | new、heat （最新、最热）                                     | 最新、最热取值           | 否       |
| title      | 资源名称                                                     | 视频标题                 | 否       |



  7：说明： 8.0  动态权限等 请开发者自己集成

  8：如果是激活的逻辑iot     集成测试网址：   116.62.153.142:10086/media   账号就是激活的sn ， 密码和逻辑科技要
​      
​        

### 其他

编写者:冯鑫

邮箱:1638627187@qq.com

日期:2019/06/28